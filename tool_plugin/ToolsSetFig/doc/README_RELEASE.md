## ToolsSet Fig – 发布准备说明 / Release Brief

> 目标：整理一版可交付的 MVP，满足 Figma 官方上架对"功能说明完备"的要求，方便后续持续加功能。

> **📌 发布前必读**：请确保已阅读 [README.md](./README.md) 了解完整功能说明，并查看 [CHANGELOG.md](./CHANGELOG.md) 了解版本信息。

### 1. 插件概述 / Overview
- 名称：`YN+ ToolsSet`
- 定位：多合一效率工具，覆盖 **批量创建 → 导出 → 编辑 → 变量样式管理 → 表格驱动内容** 等常见 UI 生产场景。
- UI 亮点：支持亮/暗主题、中文/英文切换，记忆窗口大小与最近标签。
- 数据与权限：仅使用 `clientStorage` 保存本地偏好，无云端存储；网络域名用于加载自有 CDN 资源 (`jsDelivr / cdnjs / unpkg / ipapi`)。

### 2. 建议的首发范围 / Recommended MVP Scope
1. **创建页 Create**：支持上传图片 / 表格 / `.zy` 文件、粘贴 TSV 数据，批量生成画板或标签。
2. **导出页 Export**：上传所选对象至渲染队列，输出普通图片、YN 系列 `.zy` 兼容格式或富文本描述。
3. **表单页 Sheet**：用预设或选中组件快速生成 `@table` 结构，并用表格驱动组件属性。
4. **变量页 Variable**：从当前文件收集样式/变量，创建本地表格并双向同步。
5. **编辑页 Editor（基础版）**：允许上传单个选区，套用/导出滤镜配置并回写。
6. **更多功能页 More Tools（精简展示）**：保留常用收藏与至少 1~2 个示例小工具即可。

> 其余实验性功能可暂时隐藏在 UI 中（不曝光入口）或在说明中标记 “Beta”。

### 3. 主要功能讲解 / Feature Breakdown

#### 3.1 创建 Create
- **数据输入**：拖拽/上传大图自动切片、`.csv/.xls/.xlsx` 表格、`.zy/.sketch/.svg/.json/.zip` 等兼容格式，或在多行文本框内粘贴 TSV。
- **高级设置**：自定义生效列（默认 `name,w,h,s,type,note,node`）、画板命名模板、随机/指定填充。
- **标签与大纲**：解析上传结果生成标签树，可手动编辑顺序、合并或删除后再执行创建。
- **批量建构**：支持一次创建多个 Frame/Group，自动写入 `exportType/exportSize`、网格与辅助线信息。

#### 3.2 导出 Export
- **导出类型**：Image（普通 PNG/JPG）、`.zy` 兼容格式（与其他 YN 工具互通）、Rich Text（生成带标签的文案）。
- **渲染队列**：所有导出任务集中在列表中，可单选/全选、批量删除、重新上传。
- **尺寸编辑**：支持设置目标尺寸、缩放倍数，回写到节点 `pluginData`，方便下次复用。

#### 3.3 编辑 Editor
- **上传模式**：`Up Editable` 保持矢量/文本，`Up Pixel` 导出单张 PNG 后进行像素调节。
- **滤镜栈**：可叠加多个滤镜（亮度、对比度、色相等），支持导入/导出 JSON 预设，或直接在代码框中粘贴配置。
- **画布控制**：提供独立预览区域，可切换背景色、全屏查看、清空当前栈。

#### 3.4 变量 Variable
- **类型切换**：样式 / 变量二合一界面，分别支持“检测-新建-刷新-应用”闭环。
- **示例生成**：一键创建 demo Paint Style、Variable Collection，用于教学或空文件快速体验。
- **本地表格**：自动生成 `xxx@localsheet` 页面（`@table` 结构），并允许 `Sheet ↔ Style/Variable` 双向更新。
- **扩展工具**：整理断链样式、批量重链/创建/覆盖；扫描所选组件匹配变量组。

#### 3.5 表单 Sheet
- **表格模板**：内置 10+ 预设（横线/竖线/全描边等），也可引用所选组件作为 `@th/@td` 模板。
- **数据驱动**：通过表单 textarea 或上传 CSV，将文本/属性/标签映射到 `@table`、`@th`、`@td` 上，实现批量改字、切换主题、替换图层命名。
- **实例管理**：可根据数据行数自动复制/删除实例，支持随机主题、行列增减、区域/连续选中等辅助操作。

#### 3.6 更多功能 More Tools
- 模块标签（收藏 / 像素 / 图层 / 矢量 / 样式等）收纳了额外的小工具。首发建议保留：
  - 收藏：展示文档、常见 FAQ、版本更新链接。
  - Pixel 或 Layer 中的 1~2 个稳定工具（如批量描边、对齐助手），其余先标记为“开发中”。

### 4. 使用方式 / How to Run
1. 安装依赖：在仓库根目录执行 `npm install`。
2. 构建插件：进入 `tool_plugin/ToolsSetFig`，运行 `npx webpack`，生成的 `code.js / ui.html / manifest.json` 位于 `tool_plugin/ToolsSetFig/builds`。
3. 在 Figma Desktop 选择 `Plugins → Development → Import plugin from manifest…`，指向 `builds/manifest.json`。
4. 测试时按 TAB 切换不同页，确认中英文切换、暗黑模式、窗口缩放记忆是否正常。

### 5. Figma 社区提交流程 / Figma Community Submission

#### 5.1 准备材料清单

- [ ] **插件图标**：128×128 像素，PNG 格式，透明背景
- [ ] **封面图**：1920×960 像素，安全区域 1600×960 像素
- [ ] **插件描述**：清晰简洁的功能说明（支持富文本）
- [ ] **截图**：至少 3-5 张功能演示截图
- [ ] **演示视频**（可选）：30-60 秒功能演示

#### 5.2 插件描述建议

建议按以下结构撰写插件描述：

```
YN+ ToolsSet 是一个多合一效率工具集，帮助设计师提高 Figma 工作流效率。

【核心功能】

1. 批量创建：支持图片、表格、多种格式文件导入，快速生成画板和组件
2. 智能导出：支持图片、ZY 格式、富文本等多种导出方式
3. 图像编辑：内置滤镜栈，支持亮度、对比度、色相等调整
4. 变量管理：样式和变量双向同步，支持本地表格管理
5. 表格驱动：通过表格数据批量驱动组件属性
6. 更多工具：收藏、像素处理、图层管理等实用功能

【特色亮点】
- 支持亮色/暗色主题自动切换
- 支持中文/英文双语界面
- 记忆窗口大小和最近使用的标签页
- 数据仅在本地处理，保护隐私

【使用场景】
- 批量创建设计稿
- 快速导出资源
- 管理设计变量和样式
- 数据驱动的设计迭代

【隐私说明】
本插件仅使用本地存储保存用户偏好，不收集、不上传任何用户数据。
网络访问仅用于加载 UI 资源，不涉及任何用户数据处理。
```

#### 5.3 截图/视频建议

**推荐截图内容**：
1. 主界面：展示六个功能模块标签页
2. 创建功能：展示表格导入和批量创建过程
3. 导出功能：展示导出队列和多种格式选择
4. 变量管理：展示样式/变量同步界面
5. 表格驱动：展示数据映射和批量更新效果

**视频演示流程**（30-60 秒）：
1. 导入表格数据
2. 批量创建画板
3. 使用表单批量修改文案
4. 导出图片

#### 5.4 权限说明

在 Figma 提交流程中，需要明确说明：

- **网络访问权限**：使用外部 CDN（jsDelivr、cdnjs、unpkg 等）仅用于加载 UI 资源（字体、图标、JavaScript 库），**无用户数据上报**
- **支付权限**：`payments` 仅为后续内购功能预留，**当前版本未启用**
- **用户信息权限**：`currentuser` 仅用于界面显示当前用户信息

#### 5.5 提交检查清单

- [ ] 插件功能完整测试（参考第 6 节测试检查表）
- [ ] 插件描述清晰完整
- [ ] 截图/视频准备就绪
- [ ] 权限说明已填写
- [ ] 版本号已更新
- [ ] 已知限制已说明
- [ ] 符合 Figma 社区指南

#### 5.6 提交步骤

1. 在 Figma Desktop 中：`Plugins → Manage Plugins…`
2. 找到 "YN+ ToolsSet" 插件
3. 点击 "Publish New Release"
4. 填写版本号、更新日志
5. 上传图标、封面图、截图
6. 填写插件描述
7. 选择发布对象（整个 Figma 社区或特定组织）
8. 确认权限说明
9. 点击发布

#### 5.7 审核注意事项

- 若某些功能仍在 Beta，可在 UI 中添加 "Beta" 标签
- 在描述中说明"非核心流程"以降低审核关注
- 确保所有网络请求都有明确用途说明
- 确保插件符合 Figma 社区指南和许可要求

### 6. 测试检查表 / QA Checklist
- [ ] 创建页：上传图片、表格、TSV、`.zy` 均能成功建帧；高级设置保存有效。
- [ ] 导出页：三种导出类型都能生成记录，删除/重新上传与批量勾选无异常。
- [ ] 表单页：预设表格 + 自定义组件均可生成 `@table`；映射文本、名称、属性、标签至少各测试一次。
- [ ] 变量页：能读取当前文件样式/变量，示例与本地表双向同步成功。
- [ ] 编辑页：可导入 & 应用至少一个滤镜栈，导出 JSON 预设后再次导入依然有效。
- [ ] 主题/语言/窗口尺寸：切换后记忆到下一次启动。

### 7. 已知限制 / Known Limitations
- 首次打开若无 `clientStorage` 记录，会回退到默认 UI 尺寸 300×660。
- `.zy` 兼容格式暂不支持嵌套组件的局部状态，需要手动整理。
- 在线字体/图标来自外部 CDN，需保持网络可访问；如需离线审查，可将资源改为本地路径。
- 编辑页一次仅处理单个节点；批处理滤镜暂未开放。

——  
如需在文档中引用此说明，可直接链接 `tool_plugin/ToolsSetFig/README_RELEASE.md`。如有额外模块需要纳入，请在本文件对应章节追加说明即可。

